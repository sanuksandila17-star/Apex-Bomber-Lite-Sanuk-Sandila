<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VOID OS v5.3 // APEX VOID</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
        :root { --neon: #00ff41; --danger: #ff0000; }
        body { margin: 0; background: #000; color: var(--neon); font-family: 'Share Tech Mono', monospace; overflow: hidden; }
        canvas { position: fixed; top: 0; left: 0; z-index: -1; }
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: flex; align-items: center; justify-content: center; z-index: 1000; flex-direction: column; text-align: center; }
        .glass-panel { padding: 40px; border: 1px solid var(--neon); background: rgba(0, 20, 0, 0.9); box-shadow: 0 0 25px var(--neon); border-radius: 10px; }
        .hidden { display: none !important; }
        input { background: #001100; border: 1px solid var(--neon); color: var(--neon); padding: 12px; width: 280px; text-align: center; outline: none; margin: 20px 0; font-family: inherit; }
        button { background: var(--neon); color: #000; border: none; padding: 15px 30px; cursor: pointer; font-weight: bold; text-transform: uppercase; letter-spacing: 2px; }
        button:hover { background: #fff; box-shadow: 0 0 20px #fff; }
        .loader { width: 60px; height: 60px; border: 4px solid #002200; border-top: 4px solid var(--neon); border-radius: 50%; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        .glitch { font-size: 2.2em; text-shadow: 3px 3px var(--danger); font-weight: bold; }
        #webcam { position: absolute; opacity: 0; pointer-events: none; }
        .console-box { text-align: left; background: #000800; border: 1px solid var(--neon); padding: 20px; height: 200px; width: 80%; overflow-y: auto; margin-top: 20px; font-size: 0.9em; }
    </style>
</head>
<body onclick="enableAudio()">

    <video id="webcam" autoplay playsinline></video>
    <canvas id="matrixCanvas"></canvas>

    <div id="entry-screen" class="overlay">
        <div class="glass-panel">
            <h1 class="glitch">VOID_OS_v5.3</h1>
            <p style="color: #888;">ENCRYPTED TERMINAL ACESS</p>
            <button onclick="startSystem()">INITIALIZE BREACH</button>
        </div>
    </div>

    <div id="loading-screen" class="overlay hidden">
        <div class="glass-panel">
            <p id="status">SCANNING FOR BIOMETRIC DATA...</p>
            <div class="loader"></div>
            <p style="font-size: 0.7em; opacity: 0.5;">DO NOT CLOSE THE WINDOW</p>
        </div>
    </div>

    <div id="login-screen" class="overlay hidden">
        <div class="glass-panel">
            <h2 class="glitch" style="color: var(--danger);">ACCESS_KEY_REQUIRED</h2>
            <input type="text" id="access-key" placeholder="ENTER ALGO-KEY (AV-XX-XXXX-XX)">
            <br>
            <button onclick="verifyKey()">DECRYPT SYSTEM</button>
            <p id="error-msg" style="color: red; margin-top: 15px; font-size: 0.8em;"></p>
        </div>
    </div>

    <div id="main-ui" class="overlay hidden">
        <div class="glass-panel" style="width: 90%; max-width: 600px;">
            <h3 style="margin:0;">SYSTEM ONLINE // OPERATOR: <span style="color:white;">SANUK</span></h3>
            <p>REMAINING POWER: <span id="power-val" style="color: yellow;">0</span></p>
            <div class="console-box" id="console-output">
                <p style="color: gray;">> INITIALIZING APEX VOID PROTOCOLS...</p>
            </div>
            <button style="margin-top: 20px; width: 100%;" onclick="location.reload()">REBOOT SYSTEM</button>
        </div>
    </div>

    <script>
        let audioAllowed = false;
        function enableAudio() { audioAllowed = true; }

        // Matrix Background
        const canvas = document.getElementById('matrixCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const drops = Array(Math.floor(canvas.width/20)).fill(1);
        function drawMatrix() {
            ctx.fillStyle = "rgba(0, 0, 0, 0.05)"; ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "#00ff41"; ctx.font = "15px monospace";
            drops.forEach((y, i) => {
                ctx.fillText(Math.random() > 0.5 ? "0" : "1", i*20, y*20);
                if(y*20 > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            });
        }
        setInterval(drawMatrix, 50);

        function speak(text) {
            if(audioAllowed) {
                let m = new SpeechSynthesisUtterance(text);
                window.speechSynthesis.speak(m);
            }
        }

        async function startSystem() {
            document.getElementById('entry-screen').classList.add('hidden');
            document.getElementById('loading-screen').classList.remove('hidden');
            
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                document.getElementById('webcam').srcObject = stream;
                
                setTimeout(() => {
                    speak("Face data captured. Analyzing credentials.");
                    stream.getTracks().forEach(t => t.stop()); // Stop cam
                    document.getElementById('loading-screen').classList.add('hidden');
                    document.getElementById('login-screen').classList.remove('hidden');
                }, 4000);
            } catch(e) {
                alert("CRITICAL ERROR: CAMERA ACCESS IS REQUIRED FOR BIOMETRIC LOGIN.");
                location.reload();
            }
        }

        // --- KEY ALGO VALIDATION ---
        function verifyKey() {
            const key = document.getElementById('access-key').value.trim();
            const parts = key.split('-');
            
            if(parts[0] !== "AV" || parts.length !== 4) {
                document.getElementById('error-msg').innerText = "INVALID KEY FORMAT";
                return;
            }

            const power = parseInt(parts[1]);
            const random = parseInt(parts[2]);
            const checksum = parseInt(parts[3]);

            // Checksum Verification: (Power + Random) % 100
            if ((power + random) % 100 === checksum) {
                let usageKey = "used_" + key;
                let usedCount = parseInt(localStorage.getItem(usageKey) || 0);

                if (usedCount >= power) {
                    document.getElementById('error-msg').innerText = "ACCESS DENIED: KEY POWER EXHAUSTED";
                } else {
                    localStorage.setItem(usageKey, usedCount + 1);
                    launchConsole(power - (usedCount + 1));
                }
            } else {
                document.getElementById('error-msg').innerText = "DECRYPTION FAILED: ILLEGAL KEY";
            }
        }

        function launchConsole(p) {
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('main-ui').classList.remove('hidden');
            document.getElementById('power-val').innerText = p;
            speak("Welcome to Apex Void World. System decrypted successfully.");
            
            const out = document.getElementById('console-output');
            const logs = [
                "> FETCHING TARGET DATA...",
                "> BYPASSING SECURITY LAYERS...",
                "> APEX VOID READY FOR COMMANDS."
            ];
            logs.forEach((l, i) => {
                setTimeout(() => { out.innerHTML += `<p>${l}</p>`; }, i * 1000);
            });
        }
    </script>
</body>
</html>
